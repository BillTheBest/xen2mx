SVN_VERSION	=	$(shell test -d @abs_srcdir@/.svn/ && which svn >/dev/null && svn info @abs_srcdir@ | sed -n -e 's/^Revision: //p' 2>/dev/null)

EXTRA_CFLAGS	+=	-include @abs_top_builddir@/common/omx_config.h
EXTRA_CFLAGS	+=	-include @abs_top_builddir@/driver/linux/omx_checks.h
EXTRA_CFLAGS	+=	-include @abs_top_builddir@/driver/linux/omx_debug.h
EXTRA_CFLAGS	+=	-I@abs_top_srcdir@/common/
ifneq ($(SVN_VERSION),)
	EXTRA_CFLAGS	+=	-DSVN_VERSION=\"$(SVN_VERSION)\"
endif

obj-m	+=	open-mx.o
open-mx-objs	:=	omx_main.o omx_dev.o omx_peer.o \
			omx_net.o omx_send.o omx_recv.o \
			omx_reg.o omx_pull.o omx_dma.o \
			omx_event.o

obj-m	+=	omx__assertions.o
