TESTS	=	mpoe_basic \
		mpoe_info \
		mpoe_large \
		mpoe_pingpong \
		mpoe_reg

CC	=	gcc

CFLAGS	=	-Wall
CFLAGS	+=	-g -O2
CFLAGS	+=	-I@top_srcdir@/common

LD	=	gcc

LIB	=	mpoe_lib.o

.PHONY: all clean $(TESTS)

all: $(TESTS)

$(TESTS): %: %.o $(LIB)
	$(LD) $^ -o $@

%.o: @srcdir@/%.c @srcdir@/mpoe_lib.h
	$(CC) -c $(CFLAGS) $< -o $@

clean:
	$(RM) $(TESTS) $(LIB) *.o
